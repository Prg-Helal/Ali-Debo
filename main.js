const DOM_CACHE={adSlides:null,languageToggle:null,sidebarLanguageToggle:null,registrationForm:null,mobileToggle:null,sidebar:null,overlay:null,header:null,backToTopButton:null,floatingBtnMobile:null,galleryEl:null},ANIMATION_CONFIG={adRotationInterval:5e3,loadingScreenDelay:1500,scrollThreshold:50,backToTopThreshold:300,particleCount:30,particleSizeRange:{min:2,max:6},particleDurationRange:{min:10,max:20}};function initTopBarAds(){if(DOM_CACHE.adSlides=document.querySelectorAll(".top-bar-ad .ad-slide"),!DOM_CACHE.adSlides.length)return;let e=0;DOM_CACHE.adSlides.forEach(((e,t)=>{e.style.opacity=0===t?"1":"0",e.style.transition="opacity 0.5s ease-in-out"}));const t=()=>{DOM_CACHE.adSlides[e].style.opacity="0",e=(e+1)%DOM_CACHE.adSlides.length,DOM_CACHE.adSlides[e].style.opacity="1"};DOM_CACHE.adSlides.length>1&&setInterval(t,ANIMATION_CONFIG.adRotationInterval)}function initLoadingScreen(){const e=document.querySelector(".loading-screen");e&&setTimeout((()=>{e.classList.add("hidden")}),ANIMATION_CONFIG.loadingScreenDelay)}function initThemeToggle(){const e=document.querySelector(".theme-toggle");e&&("dark"===localStorage.getItem("theme")&&document.documentElement.classList.add("dark-mode"),e.addEventListener("click",(function(){document.documentElement.classList.toggle("dark-mode");const e=document.documentElement.classList.contains("dark-mode");localStorage.setItem("theme",e?"dark":"light")})))}function initLanguageToggle(){DOM_CACHE.languageToggle=document.getElementById("languageToggle"),DOM_CACHE.sidebarLanguageToggle=document.getElementById("sidebarLanguageToggle");const e=()=>{const e=DOM_CACHE.languageToggle.querySelector("span");e&&(e.textContent="EN"===e.textContent?"AR":"EN",DOM_CACHE.languageToggle.classList.add("clicked"),setTimeout((()=>DOM_CACHE.languageToggle.classList.remove("clicked")),400))};if(DOM_CACHE.languageToggle){DOM_CACHE.languageToggle.addEventListener("click",e);const t=DOM_CACHE.languageToggle.querySelector("i");t&&(DOM_CACHE.languageToggle.addEventListener("mouseenter",(()=>{t.style.transform="rotate(15deg)"})),DOM_CACHE.languageToggle.addEventListener("mouseleave",(()=>{t.style.transform="rotate(0)"})))}DOM_CACHE.sidebarLanguageToggle&&DOM_CACHE.sidebarLanguageToggle.addEventListener("click",e)}function initRegistrationForm(){DOM_CACHE.registrationForm=document.getElementById("registrationForm");const e=document.getElementById("confirmationMessage");DOM_CACHE.registrationForm&&e&&DOM_CACHE.registrationForm.addEventListener("submit",(t=>{t.preventDefault(),e.style.display="block",DOM_CACHE.registrationForm.reset(),setTimeout((()=>{window.scrollTo({top:e.offsetTop-150,behavior:"smooth"})}),300)}))}function createParticles(){const e=document.getElementById("particles");if(!e)return;e.innerHTML="";const t=document.createDocumentFragment();for(let e=0;e<ANIMATION_CONFIG.particleCount;e++){const e=document.createElement("div");e.classList.add("particle");const n=Math.random()*(ANIMATION_CONFIG.particleSizeRange.max-ANIMATION_CONFIG.particleSizeRange.min)+ANIMATION_CONFIG.particleSizeRange.min,o=Math.random()*(ANIMATION_CONFIG.particleDurationRange.max-ANIMATION_CONFIG.particleDurationRange.min)+ANIMATION_CONFIG.particleDurationRange.min;Object.assign(e.style,{width:`${n}px`,height:`${n}px`,left:100*Math.random()+"%",top:100*Math.random()+"%",animationDuration:`${o}s`,animationDelay:5*Math.random()+"s"}),t.appendChild(e)}e.appendChild(t)}function initMobileNavigation(){if(DOM_CACHE.mobileToggle=document.getElementById("mobileToggle"),DOM_CACHE.sidebar=document.getElementById("sidebar"),DOM_CACHE.overlay=document.getElementById("overlay"),DOM_CACHE.mobileToggle&&DOM_CACHE.sidebar&&DOM_CACHE.overlay){const e=()=>{const e=DOM_CACHE.sidebar.classList.toggle("open");DOM_CACHE.mobileToggle.classList.toggle("active",e),DOM_CACHE.overlay.classList.toggle("active",e),document.body.style.overflow=e?"hidden":"auto"};DOM_CACHE.mobileToggle.addEventListener("click",e),DOM_CACHE.overlay.addEventListener("click",e)}}function initHeaderScroll(){if(DOM_CACHE.header=document.getElementById("header"),!DOM_CACHE.header)return;let e=window.scrollY,t=!1;const n=()=>{DOM_CACHE.header.classList.toggle("scrolled",window.scrollY>ANIMATION_CONFIG.scrollThreshold),t=!1};window.addEventListener("scroll",(()=>{e=window.scrollY,t||(window.requestAnimationFrame(n),t=!0)})),n()}function initSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){const t=this.getAttribute("href");if("#"===t)return;e.preventDefault();const n=document.querySelector(t);if(n&&(window.scrollTo({top:n.offsetTop-80,behavior:"smooth"}),DOM_CACHE.sidebar&&DOM_CACHE.sidebar.classList.contains("open"))){const e=new Event("click");DOM_CACHE.mobileToggle.dispatchEvent(e)}}))}))}function initBackToTopButton(){if(DOM_CACHE.backToTopButton=document.getElementById("backToTop"),DOM_CACHE.floatingBtnMobile=document.getElementById("floatingBtnMobile"),DOM_CACHE.backToTopButton){const e=()=>{const e=window.pageYOffset>ANIMATION_CONFIG.backToTopThreshold;DOM_CACHE.backToTopButton.classList.toggle("visible",e),DOM_CACHE.floatingBtnMobile&&DOM_CACHE.floatingBtnMobile.classList.toggle("visible",e)};let t=!1;window.addEventListener("scroll",(()=>{t||(window.requestAnimationFrame((()=>{e(),t=!1})),t=!0)})),DOM_CACHE.backToTopButton.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})})),e()}}function initIntersectionObservers(){const e=document.querySelectorAll(".fade-in");if(e.length){const t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&e.target.classList.add("appear")}))}),{threshold:.1,rootMargin:"0px 0px -100px 0px"});e.forEach((e=>{t.observe(e)}))}DOM_CACHE.galleryEl=document.getElementById("gallery"),DOM_CACHE.galleryEl&&initGalleryAnimation()}function initGalleryAnimation(){const e=Array.from(document.querySelectorAll(".image-container"));if(!e.length)return;let t=null,n=!1;const o=3e3,a=1,l=.5,i=e=>new Promise((t=>{const n=new Image;n.onload=()=>t(),n.onerror=()=>t(),n.src=e})),r=(e,t)=>{gsap.set(e,{clearProps:"all"});gsap.set(e,{left:{x:"100%",y:"0%"},right:{x:"-100%",y:"0%"},up:{x:"0%",y:"100%"}}[t]||{x:"0%",y:"0%"}),e.style.opacity=1},s=async()=>{const t=(()=>{const t=new Set(e.map((e=>{return t=e.querySelector(".current")?.src,t.split("/").pop().split("?")[0];var t})));let n=[];for(let e=1;e<=6;e++)t.has(`${e}.jpg`)||n.push(e);for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}return n.slice(0,e.length).map((e=>`images/${e}.jpg`))})(),n=e.map(((e,n)=>(e.querySelector(".next").src=t[n],(async(e,t=0)=>{const n=e.dataset.direction,o=e.querySelector(".current"),l=e.querySelector(".next");await i(l.src),r(l,n);const s={},c={};"left"===n?(s.x="-100%",c.x="0%"):"right"===n?(s.x="100%",c.x="0%"):"up"===n&&(s.y="-100%",c.y="0%"),l.style.zIndex=2,o.style.zIndex=1,await new Promise((e=>setTimeout(e,Math.round(1e3*t)))),gsap.to(o,{...s,scale:.95,duration:a,ease:"power2.inOut"}),await gsap.to(l,{...c,scale:1,duration:a,ease:"power2.inOut"}),o.src=l.src,gsap.set(o,{x:0,y:0,scale:1}),r(l,n)})(e,n*l))));await Promise.all(n)};(()=>{let t=Array.from({length:6},((e,t)=>t+1));e.forEach((e=>{const n=t.splice(Math.floor(Math.random()*t.length),1)[0],o=e.querySelector(".current"),a=e.querySelector(".next");o.src=`images/${n}.jpg`;const l=Array.from({length:6},((e,t)=>t+1)).filter((e=>e!==n)),s=l[Math.floor(Math.random()*l.length)];a.src=`images/${s}.jpg`,r(a,e.dataset.direction),i(a.src)}))})();new IntersectionObserver((([e])=>{n=e.isIntersecting,n?(()=>{if(t)return;const e=async()=>{n?(await s(),t=setTimeout(e,o)):t=null};e()})():t&&(clearTimeout(t),t=null)}),{threshold:.5}).observe(DOM_CACHE.galleryEl)}document.addEventListener("DOMContentLoaded",(function(){initTopBarAds(),initThemeToggle(),initLanguageToggle(),initRegistrationForm(),initMobileNavigation(),initHeaderScroll(),initSmoothScrolling(),initBackToTopButton(),initIntersectionObservers(),window.addEventListener("load",(function(){initLoadingScreen(),createParticles()}))})),window.closeFloatingAd=function(){const e=document.getElementById("floatingAd");e&&(e.style.display="none")};
